"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1584],{7231:(R,$,i)=>{i.d($,{C:()=>v});var f=i(1528),d=i(4552),D=i(5748),a=i(4688),u=i(1512),C=i(4496),N=i(9552);let v=(()=>{var y;class S{constructor(t,o,n){this.auth=t,this.fireStore=o,this.storage=n}getNotes(t,o,n,s){let e,r=(0,a.oV)(this.fireStore,`${s}/from_${this.auth.currentUser.email}_in_${n}/NoteData`);return""!=t&&(e=(0,a.kt)(r,(0,a.A9)("name",">=",t),(0,a.A9)("name","<=",t+"\uf8ff"))),""!==o&&(e=(0,a.kt)(e||r,(0,a.A9)("hometown","==",o))),(0,d.GK)(""!=o||""!=t?e:r)}getEmails(t){return(0,d.GK)((0,a.oV)(this.fireStore,`emails_in_${t}`))}getShared(t,o){return(0,d.GK)((0,a.oV)(this.fireStore,`${o}/from_${this.auth.currentUser.email}_in_${t}/SharedNoteData`))}uploadImage(t,o,n,s,c){var r=this;return(0,f.c)(function*(){const e=r.auth.currentUser,h=(0,D.IL)(r.storage,`uploads/${n}'s_avatar.png_${o}`);try{yield(0,u.K)(h,t.base64String,"base64");const b=yield(0,u.Kq)(h),g=(0,a.oV)(r.fireStore,`${c}/from_${e.email}_in_${s}/NoteData`),P=(0,d.UN)(g,o);return yield(0,a.gD)(P,{imageURL:b}),!0}catch{return null}})()}uploadNote(t,o,n,s,c,r){var e=this;return(0,f.c)(function*(){const m=e.auth.currentUser,b=(0,D.IL)(e.storage,`uploads/${t}'s_avatar.png_${r}`);try{const g=(0,a.oV)(e.fireStore,`${c}/from_${m.email}_in_${s}/NoteData`),P="",U="";if(n){yield(0,u.K)(b,n.base64String,"base64");const T=yield(0,u.Kq)(b);return yield(0,a.Sm)((0,d.UN)(g,r),{name:t,hometown:o,imageURL:T,noteInfo:P,noteLink:U,id:r}),!0}return yield(0,a.Sm)((0,d.UN)(g,r),{name:t,hometown:o,imageURL:"",noteInfo:P,noteLink:U,id:r}),!0}catch(g){return console.log(g),null}})()}uploadSharedNote(t,o,n,s,c,r,e,m){var h=this;return(0,f.c)(function*(){const b=h.auth.currentUser;try{const g=(0,a.oV)(h.fireStore,`${e}/from_${b.email}_in_${r}/NoteData`);return yield(0,a.Sm)((0,d.UN)(g,m),{name:t,hometown:o,imageURL:n,noteInfo:c,noteLink:s,id:m}),!0}catch(g){return console.log(g),null}})()}uploadAllSharedNotes(t,o,n){var s=this;return(0,f.c)(function*(){const c=s.auth.currentUser;try{const r=(0,a.oV)(s.fireStore,`${n}/from_${c.email}_in_${o}/NoteData`);for(const e of t)yield(0,a.Sm)((0,d.UN)(r,e.id),{name:e.name,hometown:e.hometown,imageURL:e.imageURL,noteLink:e.noteLink,noteInfo:e.noteInfo,id:e.id});return!0}catch(r){return console.log(r),null}})()}shareNote(t,o,n,s,c,r,e,m,h){var b=this;return(0,f.c)(function*(){if(""==t)return null;try{const g=(0,a.oV)(b.fireStore,`${m}/from_${t}_in_${e}/SharedNoteData`);return console.log("Der Pfad!: "+g),yield(0,a.Sm)((0,d.UN)(g,h),{name:o,hometown:n,imageURL:s,noteLink:c,noteInfo:r,id:h}),!0}catch(g){return console.log(g),null}})()}shareAllNotes(t,o,n,s){var c=this;return(0,f.c)(function*(){if(""==t)return null;try{const r=(0,a.oV)(c.fireStore,`${s}/from_${t}_in_${n}/SharedNoteData`);for(const e of o)yield(0,a.Sm)((0,d.UN)(r,e.id),{name:e.name,hometown:e.hometown,imageURL:e.imageURL,noteLink:e.noteLink,noteInfo:e.noteInfo,id:e.id});return!0}catch(r){return console.log(r),null}})()}getNoteData(t,o,n){var s=this;return(0,f.c)(function*(){const c=s.auth.currentUser,r=(0,a.gZ)(),e=(0,d.UN)(r,`${n}/from_${c.email}_in_${o}/NoteData`,t),m=yield(0,a.i4)(e);try{return m.exists()?m.data():(console.log("Kein Dokument mit dieser ID gefunden."),null)}catch(h){console.error("Fehler beim Abrufen des Dokuments:",h)}})()}getSharedNoteData(t,o,n){var s=this;return(0,f.c)(function*(){const c=s.auth.currentUser,r=(0,a.gZ)(),e=(0,d.UN)(r,`${n}/from_${c.email}_in_${o}/SharedNoteData`,t),m=yield(0,a.i4)(e);try{return m.exists()?m.data():(console.log("Kein Dokument mit dieser ID gefunden."),null)}catch(h){console.error("Fehler beim Abrufen des Dokuments:",h)}})()}updateNote(t,o,n,s,c,r,e){var m=this;return(0,f.c)(function*(){const h=m.auth.currentUser;try{const b=(0,a.oV)(m.fireStore,`${r}/from_${h.email}_in_${c}/NoteData`),g=(0,d.UN)(b,e);return yield(0,a.gD)(g,{name:s,hometown:t,noteLink:o,noteInfo:n}),!0}catch{return null}})()}deleteDocument(t,o,n){var s=this;return(0,f.c)(function*(){const c=s.auth.currentUser;try{const r=(0,a.gZ)(),e=(0,d.UN)(r,`${n}/from_${c.email}_in_${o}/NoteData`,t);return yield(0,a.oh)(e),console.log("Document successfully deleted!"),!0}catch(r){return console.error("Error deleting document: ",r),!1}})()}deleteSharedDocument(t,o,n){var s=this;return(0,f.c)(function*(){const c=s.auth.currentUser;try{const r=(0,a.gZ)(),e=(0,d.UN)(r,`${n}/from_${c.email}_in_${o}/SharedNoteData`,t);return yield(0,a.oh)(e),console.log("Document successfully deleted!"),!0}catch(r){return console.error("Error deleting document: ",r),!1}})()}deleteAllSharedDocuments(t,o){var n=this;return(0,f.c)(function*(){const s=n.auth.currentUser;try{const c=(0,a.gZ)(),r=(0,a.oV)(c,`${o}/from_${s.email}_in_${t}/SharedNoteData`);return(yield(0,a.uY)(r)).forEach(function(){var m=(0,f.c)(function*(h){const b=(0,d.UN)(c,h.ref.path);yield(0,a.oh)(b),console.log("Document successfully deleted:",h.id)});return function(h){return m.apply(this,arguments)}}()),console.log("All documents successfully deleted!"),!0}catch(c){return console.error("Error deleting documents: ",c),!1}})()}}return(y=S).\u0275fac=function(t){return new(t||y)(C.CoB(N.sL),C.CoB(d.OI),C.CoB(D.u_))},y.\u0275prov=C.wxM({token:y,factory:y.\u0275fac,providedIn:"root"}),S})()},1584:(R,$,i)=>{i.r($),i.d($,{TabsPageModule:()=>S});var f=i(2112),d=i(1368),D=i(4716),a=i(8244),u=i(4496),C=i(7231);const v=[{path:"",component:(()=>{var l;class t{constructor(n){this.databaseService=n,this.noteTypeLoc="locations",this.noteTypeNPC="npcs",this.noteTypeOrg="organizations",this.noteTypeOth="quests",this.currentGame=localStorage.getItem("currentGame"),this.databaseService.getShared(this.currentGame,this.noteTypeLoc).subscribe(s=>{this.sharedLocationCount=s.length,this.sharedLocationCountG1=this.sharedLocationCount>0}),this.databaseService.getShared(this.currentGame,this.noteTypeNPC).subscribe(s=>{this.sharedNPCCount=s.length,this.sharedNPCCountG1=this.sharedNPCCount>0}),this.databaseService.getShared(this.currentGame,this.noteTypeOrg).subscribe(s=>{this.sharedOrganizationCount=s.length,this.sharedOrganizationCountG1=this.sharedOrganizationCount>0}),this.databaseService.getShared(this.currentGame,this.noteTypeOth).subscribe(s=>{this.sharedOtherCount=s.length,this.sharedOtherCountG1=this.sharedOtherCount>0})}}return(l=t).\u0275fac=function(n){return new(n||l)(u.GI1(C.C))},l.\u0275cmp=u.In1({type:l,selectors:[["app-tabs"]],decls:12,vars:8,consts:[["slot","bottom"],["tab","tab1","href","/tabs/tab1"],["name","person-outline"],["tab","tab2","href","/tabs/tab2"],["aria-hidden","true","name","people-outline"],["tab","tab5","href","/tabs/tab5"],["name","location-outline"],["tab","tab3","href","/tabs/tab3"],["name","book-outline"],["tab","tab4","href","/tabs/tab4"],["name","settings-outline"]],template:function(n,s){1&n&&(u.I0R(0,"ion-tabs")(1,"ion-tab-bar",0)(2,"ion-tab-button",1),u.wR5(3,"ion-icon",2),u.C$Y(),u.I0R(4,"ion-tab-button",3),u.wR5(5,"ion-icon",4),u.C$Y(),u.I0R(6,"ion-tab-button",5),u.wR5(7,"ion-icon",6),u.C$Y(),u.I0R(8,"ion-tab-button",7),u.wR5(9,"ion-icon",8),u.C$Y(),u.I0R(10,"ion-tab-button",9),u.wR5(11,"ion-icon",10),u.C$Y()()()),2&n&&(u.yG2(2),u.eAK("tab-button-red-dot",s.sharedNPCCountG1),u.yG2(2),u.eAK("tab-button-red-dot",s.sharedOrganizationCountG1),u.yG2(2),u.eAK("tab-button-red-dot",s.sharedLocationCountG1),u.yG2(2),u.eAK("tab-button-red-dot",s.sharedOtherCountG1))},dependencies:[f.Ko,f.mx,f.ej,f.CE]}),t})(),children:[{path:"",pathMatch:"full",redirectTo:"tabs"},{path:"tab1",loadChildren:()=>Promise.all([i.e(5508),i.e(88)]).then(i.bind(i,88)).then(l=>l.Tab1PageModule)},{path:"tab2",loadChildren:()=>Promise.all([i.e(5508),i.e(5656)]).then(i.bind(i,5656)).then(l=>l.Tab2PageModule)},{path:"tab3",loadChildren:()=>Promise.all([i.e(5508),i.e(4644)]).then(i.bind(i,4644)).then(l=>l.Tab3PageModule)},{path:"tab4",loadChildren:()=>Promise.all([i.e(9312),i.e(8116)]).then(i.bind(i,8116)).then(l=>l.Tab4PageModule)},{path:"tab5",loadChildren:()=>Promise.all([i.e(5508),i.e(312)]).then(i.bind(i,312)).then(l=>l.Tab5PageModule)},{path:"tabs",redirectTo:"/tabs/tab1",pathMatch:"full"}]},{path:"tabs",redirectTo:"tabs",pathMatch:"full"}];let y=(()=>{var l;class t{}return(l=t).\u0275fac=function(n){return new(n||l)},l.\u0275mod=u.a4G({type:l}),l.\u0275inj=u.s3X({imports:[a.qQ.forChild(v)]}),t})(),S=(()=>{var l;class t{}return(l=t).\u0275fac=function(n){return new(n||l)},l.\u0275mod=u.a4G({type:l}),l.\u0275inj=u.s3X({imports:[f.wZ,d.MD,D.y,y]}),t})()}}]);