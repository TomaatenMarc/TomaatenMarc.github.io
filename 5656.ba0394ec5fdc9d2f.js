"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5656],{5656:(re,h,m)=>{m.r(h),m.d(h,{Tab2PageModule:()=>ie});var s=m(2112),p=m(1368),g=m(4716),C=m(4692),f=m(8244),_=m(1528),u=m(1740);class b{constructor(r){this.formBuilder=r}createForm(){return this.formBuilder.group({name:["",[g.AQ.required]],hometown:[""]})}}var e=m(4496),O=m(7231);const T=["creationModalOrga"],y=["searchModalOrga"],I=["itemModalOrga"],G=["alertModalOrga"];function k(o,r){if(1&o&&(e.I0R(0,"ion-select-option",23),e.OEk(1),e.C$Y()),2&o){const a=r.$implicit;e.E7m("value",a.email),e.yG2(),e.cNF(a.email)}}function E(o,r){if(1&o){const a=e.KQA();e.I0R(0,"h3"),e.OEk(1,"Share all organizations"),e.C$Y(),e.I0R(2,"ion-select",20),e.iHE("ngModelChange",function(t){e.usT(a);const i=e.GaO();return e.kNx(i.chosenUsers,t)||(i.chosenUsers=t),e.CGJ(t)}),e.yuY(3,k,2,2,"ion-select-option",21),e.C$Y(),e.I0R(4,"ion-button",22),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.shareAllOrganizations())}),e.OEk(5,"Share all"),e.C$Y()}if(2&o){const a=e.GaO();e.yG2(2),e.E7m("multiple",!0),e.OKB("ngModel",a.chosenUsers),e.yG2(),e.E7m("ngForOf",a.users)}}function x(o,r){if(1&o&&e.wR5(0,"img",32),2&o){const a=e.GaO().$implicit;e._6D("alt",a.name),e.E7m("src",a.imageURL,e.K6U)}}function R(o,r){1&o&&(e.I0R(0,"div",33),e.wR5(1,"img",34),e.C$Y())}function Y(o,r){if(1&o&&(e.I0R(0,"p",35),e.OEk(1),e.C$Y()),2&o){const a=e.GaO().$implicit;e.yG2(),e.cNF(a.noteInfo)}}function M(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-col",24)(1,"ion-card",25)(2,"ion-card-header")(3,"div",26),e.qCj("click",function(){const i=e.usT(a).$implicit,l=e.GaO();return e.CGJ(l.changeImage(i))}),e.yuY(4,x,1,2,"img",27)(5,R,2,0,"ng-template",null,28,e.gJz),e.C$Y(),e.I0R(7,"ion-card-title"),e.OEk(8),e.C$Y(),e.I0R(9,"ion-card-subtitle"),e.OEk(10),e.C$Y()(),e.I0R(11,"ion-card-content"),e.yuY(12,Y,2,1,"p",29),e.C$Y(),e.I0R(13,"ion-row")(14,"ion-col")(15,"ion-button",30),e.qCj("click",function(){const i=e.usT(a).$implicit,l=e.GaO();return e.CGJ(l.setIndexOrga(i))}),e.OEk(16," Details "),e.wR5(17,"ion-icon",31),e.C$Y()()()()()}if(2&o){const a=r.$implicit,n=r.index,t=e.Gew(6);e.yG2(),e.E7m("ngClass",n%2==0?"even-item":"odd-item"),e.yG2(3),e.E7m("ngIf",a.imageURL)("ngIfElse",t),e.yG2(4),e.cNF(a.name),e.yG2(2),e.cNF(a.hometown),e.yG2(2),e.E7m("ngIf",a.noteInfo)}}function P(o,r){1&o&&(e.I0R(0,"p"),e.OEk(1,"Picture has been selected"),e.C$Y())}function v(o,r){1&o&&(e.I0R(0,"div",33)(1,"p"),e.OEk(2,"Choose a picture"),e.C$Y()())}function w(o,r){1&o&&(e.I0R(0,"ion-label",46),e.OEk(1,"Name is mandatory"),e.C$Y())}function $(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",36)(1,"div",37)(2,"form",38)(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e.OEk(6,"Create Organization Note"),e.C$Y()(),e.I0R(7,"ion-card-content")(8,"ion-item",39),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.chooseImage())}),e.yuY(9,P,2,0,"p",40)(10,v,3,0,"ng-template",null,28,e.gJz),e.C$Y(),e.I0R(12,"ion-item"),e.wR5(13,"ion-input",41),e.C$Y(),e.yuY(14,w,2,0,"ion-label",42),e.I0R(15,"ion-item"),e.wR5(16,"ion-input",43),e.C$Y(),e.I0R(17,"ion-button",44),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.createOrganization())}),e.OEk(18,"Create Organization"),e.C$Y(),e.I0R(19,"ion-button",45),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.cancelCreationOrga())}),e.OEk(20,"Cancel"),e.C$Y()()()()()()}if(2&o){const a=e.Gew(11),n=e.GaO();let t;e.yG2(2),e.E7m("formGroup",n.createOrgaForm),e.yG2(7),e.E7m("ngIf",n.photo)("ngIfElse",a),e.yG2(5),e.E7m("ngIf",(null==(t=n.createOrgaForm.get("name"))?null:t.touched)&&(null==(t=n.createOrgaForm.get("name"))||null==t.errors?null:t.errors.required)),e.yG2(3),e.E7m("disabled",!n.createOrgaForm.valid)}}function S(o,r){if(1&o&&(e.I0R(0,"ion-select-option",23),e.OEk(1),e.C$Y()),2&o){const a=r.$implicit;e.E7m("value",a),e.yG2(),e.cNF(a)}}function z(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",36)(1,"div",37)(2,"form")(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e.OEk(6,"Search for an organization"),e.C$Y()(),e.I0R(7,"ion-card-content")(8,"ion-item"),e.wR5(9,"ion-searchbar",47,48),e.C$Y(),e.I0R(11,"ion-item")(12,"ion-label",49),e.OEk(13,"Choose an origin"),e.C$Y(),e.I0R(14,"ion-select",50),e.iHE("ngModelChange",function(t){e.usT(a);const i=e.GaO();return e.kNx(i.selectedHometown,t)||(i.selectedHometown=t),e.CGJ(t)}),e.yuY(15,S,2,2,"ion-select-option",21),e.C$Y()(),e.I0R(16,"ion-button",51),e.qCj("click",function(){e.usT(a);const t=e.Gew(10),i=e.GaO();return e.CGJ(i.search(t.value))}),e.OEk(17,"Search"),e.C$Y(),e.I0R(18,"ion-button",39),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.sort("alphabetical"))}),e.OEk(19,"Sort Alphabetically"),e.C$Y(),e.I0R(20,"ion-button",39),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.sort("oldest"))}),e.OEk(21,"Sort by Oldest"),e.C$Y(),e.I0R(22,"ion-button",39),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.sort("newest"))}),e.OEk(23,"Sort by Newest"),e.C$Y(),e.I0R(24,"ion-button",45),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.cancelSearchOrga())}),e.OEk(25,"Cancel"),e.C$Y()()()()()()}if(2&o){const a=e.GaO();e.yG2(14),e.OKB("ngModel",a.selectedHometown),e.yG2(),e.E7m("ngForOf",a.hometowns)}}function N(o,r){if(1&o&&(e.I0R(0,"ion-select-option",23),e.OEk(1),e.C$Y()),2&o){const a=r.$implicit;e.E7m("value",a.email),e.yG2(),e.cNF(a.email)}}function D(o,r){if(1&o){const a=e.KQA();e.I0R(0,"h3"),e.OEk(1,"Share this organization"),e.C$Y(),e.I0R(2,"ion-select",70),e.iHE("ngModelChange",function(t){e.usT(a);const i=e.GaO(2);return e.kNx(i.chosenUsers,t)||(i.chosenUsers=t),e.CGJ(t)}),e.yuY(3,N,2,2,"ion-select-option",21),e.C$Y(),e.I0R(4,"ion-button",22),e.qCj("click",function(){e.usT(a);const t=e.GaO(2);return e.CGJ(t.shareOrganization())}),e.OEk(5,"Share"),e.C$Y()}if(2&o){const a=e.GaO(2);e.yG2(2),e.E7m("multiple",!0),e.OKB("ngModel",a.chosenUsers),e.yG2(),e.E7m("ngForOf",a.users)}}function A(o,r){if(1&o&&(e.I0R(0,"ion-card-title",71),e.OEk(1),e.C$Y()),2&o){const a=e.GaO(2);e.CI5("id","nameOrga",a.currentItemIndexOrga,""),e.yG2(),e.cNF(a.orgaName)}}function F(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-input",72),e.iHE("ngModelChange",function(t){e.usT(a);const i=e.GaO(2);return e.kNx(i.orgaName,t)||(i.orgaName=t),e.CGJ(t)}),e.C$Y()}if(2&o){const a=e.GaO(2);e.OKB("ngModel",a.orgaName)}}function q(o,r){if(1&o&&e.wR5(0,"img",32),2&o){const a=e.GaO(2);e._6D("alt",a.orga.name),e.E7m("src",a.orga.imageURL,e.K6U)}}function j(o,r){1&o&&(e.I0R(0,"div",33),e.wR5(1,"img",34),e.C$Y())}function J(o,r){1&o&&(e.I0R(0,"ion-label",1),e.OEk(1,"Hometown: "),e.C$Y())}function K(o,r){if(1&o&&(e.I0R(0,"a",73),e.OEk(1),e.C$Y()),2&o){const a=e.GaO(2);e.yG2(),e.cNF(a.orgaHome)}}function U(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-input",74),e.iHE("ngModelChange",function(t){e.usT(a);const i=e.GaO(2);return e.kNx(i.orgaHome,t)||(i.orgaHome=t),e.CGJ(t)}),e.C$Y()}if(2&o){const a=e.GaO(2);e.OKB("ngModel",a.orgaHome)}}function H(o,r){1&o&&(e.I0R(0,"ion-label",1),e.OEk(1,"Link:"),e.C$Y())}function B(o,r){if(1&o&&(e.I0R(0,"a",76),e.OEk(1),e.C$Y()),2&o){const a=e.GaO(3);e._6D("href",a.orgaLink,e.K6U),e.yG2(),e.cNF(a.orgaName)}}function L(o,r){if(1&o&&(e.SAx(0),e.yuY(1,B,2,2,"a",75),e.k70()),2&o){const a=e.GaO(2);e.yG2(),e.E7m("ngIf",!a.editMode)}}function Q(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-input",77),e.iHE("ngModelChange",function(t){e.usT(a);const i=e.GaO(2);return e.kNx(i.orgaLink,t)||(i.orgaLink=t),e.CGJ(t)}),e.C$Y()}if(2&o){const a=e.GaO(2);e.OKB("ngModel",a.orgaLink)}}function W(o,r){if(1&o&&(e.I0R(0,"textarea",78),e.OEk(1),e.C$Y()),2&o){const a=e.GaO(2);e.yG2(),e.cNF(a.orgaInfo)}}function X(o,r){if(1&o){const a=e.KQA();e.I0R(0,"textarea",79),e.iHE("ngModelChange",function(t){e.usT(a);const i=e.GaO(2);return e.kNx(i.orgaInfo,t)||(i.orgaInfo=t),e.CGJ(t)}),e.OEk(1),e.C$Y()}if(2&o){const a=e.GaO(2);e.OKB("ngModel",a.orgaInfo),e.yG2(),e.cNF(a.orgaInfo)}}function Z(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",36)(1,"ion-fab",52)(2,"ion-fab-button",8),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.toggleEditModeOrga())}),e.wR5(3,"ion-icon",53),e.C$Y()(),e.I0R(4,"ion-fab",52)(5,"ion-fab-button",54),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.saveOrgaData())}),e.wR5(6,"ion-icon",55),e.C$Y()(),e.I0R(7,"ion-fab",56)(8,"ion-fab-button",57),e.wR5(9,"ion-icon",58),e.C$Y()(),e.I0R(10,"ion-popover",59),e.yuY(11,D,6,3,"ng-template"),e.C$Y(),e.I0R(12,"ion-card")(13,"ion-card-header"),e.yuY(14,A,2,2,"ion-card-title",60)(15,F,1,1,"ion-input",61),e.C$Y(),e.I0R(16,"ion-card-content")(17,"ion-item")(18,"div",26),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.changeImage(t.orga))}),e.yuY(19,q,1,2,"img",27)(20,j,2,0,"ng-template",null,28,e.gJz),e.C$Y()()(),e.I0R(22,"ion-card-content")(23,"ion-item"),e.yuY(24,J,2,0,"ion-label",62)(25,K,2,1,"a",63)(26,U,1,1,"ion-input",64),e.C$Y(),e.I0R(27,"ion-item"),e.yuY(28,H,2,0,"ion-label",62)(29,L,2,1,"ng-container",65)(30,Q,1,1,"ion-input",66),e.C$Y()()(),e.I0R(31,"ion-card")(32,"ion-card-header")(33,"ion-card-title"),e.OEk(34,"Additional Infos"),e.C$Y()(),e.I0R(35,"ion-card-content")(36,"ion-item"),e.yuY(37,W,2,1,"textarea",67)(38,X,2,2,"textarea",68),e.C$Y()()(),e.I0R(39,"ion-button",45),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.cancelItemOrga())}),e.OEk(40,"Close"),e.C$Y(),e.I0R(41,"ion-button",69),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.delete())}),e.OEk(42,"Delete"),e.C$Y()()}if(2&o){const a=e.Gew(21),n=e.GaO();e.yG2(),e.E7m("hidden",n.editMode),e.yG2(3),e.E7m("hidden",!n.editMode),e.yG2(3),e.E7m("hidden",n.editMode),e.yG2(3),e.E7m("isOpen",n.isPopoverOpen),e.yG2(4),e.E7m("ngIf",!n.editMode),e.yG2(),e.E7m("ngIf",n.editMode),e.yG2(4),e.E7m("ngIf",n.orga.imageURL)("ngIfElse",a),e.yG2(5),e.E7m("ngIf",!n.editMode),e.yG2(),e.E7m("ngIf",!n.editMode),e.yG2(),e.E7m("ngIf",n.editMode),e.yG2(2),e.E7m("ngIf",!n.editMode),e.yG2(),e.E7m("ngIf",n.orgaLink),e.yG2(),e.E7m("ngIf",n.editMode),e.yG2(7),e.E7m("ngIf",!n.editMode),e.yG2(),e.E7m("ngIf",n.editMode)}}function V(o,r){if(1&o&&e.wR5(0,"img",91),2&o){const a=e.GaO().$implicit;e.E7m("src",a.imageURL,e.K6U)}}function ee(o,r){1&o&&(e.I0R(0,"div",33),e.wR5(1,"img",92),e.C$Y())}function te(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-item-sliding")(1,"ion-item",85)(2,"ion-avatar",86),e.yuY(3,V,1,1,"img",87)(4,ee,2,0,"ng-template",null,28,e.gJz),e.C$Y(),e.I0R(6,"ion-label",88),e.OEk(7),e.C$Y(),e.I0R(8,"ion-label"),e.OEk(9),e.C$Y(),e.I0R(10,"ion-label"),e.OEk(11),e.C$Y(),e.I0R(12,"ion-icon",89),e.qCj("click",function(){const i=e.usT(a).index,l=e.GaO(2);return e.CGJ(l.addToDatabase(i))}),e.C$Y(),e.I0R(13,"ion-icon",90),e.qCj("click",function(){const i=e.usT(a).index,l=e.GaO(2);return e.CGJ(l.deleteShared(i))}),e.C$Y()()()}if(2&o){const a=r.$implicit,n=r.index,t=e.Gew(5);e.yG2(),e.E7m("button",!0)("ngClass",n%2==0?"even-item":"odd-item"),e.yG2(2),e.E7m("ngIf",a.imageURL)("ngIfElse",t),e.yG2(3),e.CI5("id","OrgaId",n,""),e.yG2(),e.cNF(a.id),e.yG2(2),e.cNF(a.name),e.yG2(2),e.cNF(a.hometown)}}function ne(o,r){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",36)(1,"h3",80),e.OEk(2,"Shared Organizations"),e.C$Y(),e.I0R(3,"ion-button",81),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.addAllToDatabase())}),e.OEk(4,"Accept all"),e.C$Y(),e.I0R(5,"ion-button",69),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.dismissAllShared())}),e.OEk(6,"Dismiss all"),e.C$Y(),e.I0R(7,"ion-button",82),e.qCj("click",function(){e.usT(a);const t=e.GaO();return e.CGJ(t.cancelAlertOrga())}),e.OEk(8,"Close"),e.C$Y(),e.I0R(9,"ion-list",83),e.yuY(10,te,14,8,"ion-item-sliding",84),e.C$Y()()}if(2&o){const a=e.GaO();e.yG2(9),e.E7m("inset",!0),e.yG2(),e.E7m("ngForOf",a.sharedOrganizations)}}const ae=[{path:"",component:(()=>{var o;class r{constructor(n,t,i,l){this.databaseService=n,this.loadingController=t,this.alertController=i,this.formBuilder=l,this.searchItem="",this.selectedHometown="",this.chosenUsers=null,this.profile=null,this.orgas=null,this.sharedOrganizations=null,this.users=null,this.filter=!0,this.editMode=!1,this.isPopoverOpen=!1,this.tempOrganizationLink="",this.tempOrganizationInfo="",this.noteType="organizations",this.currentGame=localStorage.getItem("currentGame"),this.databaseService.getNotes(this.searchItem,this.selectedHometown,this.currentGame,this.noteType).subscribe(c=>{this.orgas=c,this.hometowns=this.uniqueHometowns}),this.databaseService.getEmails(this.currentGame).subscribe(c=>{this.users=c}),this.databaseService.getShared(this.currentGame,this.noteType).subscribe(c=>{this.sharedOrganizations=c,this.sharedOrgaCount=c.length})}ngOnInit(){this.createOrgaForm=new b(this.formBuilder).createForm(),this.onWillDismiss(null)}toggleEditModeOrga(){this.editMode=!this.editMode}get uniqueHometowns(){if(!this.orgas)return[];const n=new Set;return this.orgas.forEach(t=>n.add(t.hometown)),Array.from(n)}search(n){console.log(this.selectedHometown),this.databaseService.getNotes(n,this.selectedHometown,this.currentGame,this.noteType).subscribe(t=>{this.orgas=t}),this.selectedHometown="",this.cancelSearchOrga(),setTimeout(()=>{this.filter=!this.filter},300)}sort(n){if(this.orgas)switch(n){case"alphabetical":this.orgas.sort((t,i)=>t.name.localeCompare(i.name));break;case"oldest":this.orgas.sort((t,i)=>t.id.localeCompare(i.id));break;case"newest":this.orgas.sort((t,i)=>i.id.localeCompare(t.id));break;default:console.warn("Unknown sorting algorithm:",n)}}changeImage(n){var t=this;return(0,_.c)(function*(){const i=yield u.Ut.getPhoto({quality:90,allowEditing:!1,resultType:u.on.Base64,source:u._8.Photos});if(i){const l=yield t.loadingController.create();yield l.present();const c=yield t.databaseService.uploadImage(i,n.id,n.name,t.currentGame,t.noteType);l.dismiss(),c||(yield(yield t.alertController.create({header:"Upload failed",message:"There was a problem uploading your avatar.",buttons:["OK"]})).present())}})()}chooseImage(){var n=this;return(0,_.c)(function*(){n.photo=yield u.Ut.getPhoto({quality:90,allowEditing:!1,resultType:u.on.Base64,source:u._8.Photos})})()}saveOrgaData(){var n=this;return(0,_.c)(function*(){const t=yield n.loadingController.create();yield t.present();const i=yield n.databaseService.updateNote(n.orgaHome,n.orgaLink,n.orgaInfo,n.orgaName,n.currentGame,n.noteType,n.orgaId);t.dismiss(),i||(yield(yield n.alertController.create({header:"Upload failed",message:"There was a problem uploading your data.",buttons:["OK"]})).present()),n.toggleEditModeOrga()})()}createOrganization(){var n=this;return(0,_.c)(function*(){const t=yield n.loadingController.create();yield t.present();const l=(new Date).toISOString(),c=yield n.databaseService.uploadNote(n.createOrgaForm.value.name,n.createOrgaForm.value.hometown,null==n?void 0:n.photo,n.currentGame,n.noteType,l);n.photo=null,n.createOrgaForm.reset(),t.dismiss(),c||(yield(yield n.alertController.create({header:"Upload failed",message:"There was a problem uploading your organization.",buttons:["OK"]})).present()),n.cancelCreationOrga()})()}delete(){var n=this;return(0,_.c)(function*(){yield(yield n.alertController.create({header:"Are you sure?",message:"Data will be deleted",buttons:[{text:"Delete",handler:()=>{n.databaseService.deleteDocument(n.orga.id,n.currentGame,n.noteType),n.cancelItemOrga()}},{text:"Cancel",role:"cancel",handler:()=>{}}]})).present()})()}deleteShared(n){var t=this;return(0,_.c)(function*(){yield(yield t.alertController.create({header:"Are you sure?",message:"Data will be deleted",buttons:[{text:"Dismiss",handler:()=>{var l;const d=null===(l=document.getElementById("OrgaId"+n))||void 0===l?void 0:l.textContent;t.databaseService.deleteSharedDocument(d,t.currentGame,t.noteType),t.cancelItemOrga()}},{text:"Cancel",role:"cancel",handler:()=>{}}]})).present()})()}setIndexOrga(n){var t=this;return(0,_.c)(function*(){t.orgaName=n.name,t.orgaHome=n.hometown,t.orgaImg=n.imageURL,t.orgaInfo=n.noteInfo,t.orgaLink=n.noteLink,t.orgaId=n.id,t.orga=n,t.isItemModalOpenOrga=!0})()}setSharedIndex(n){var t=this;return(0,_.c)(function*(){var i;const c=null===(i=document.getElementById("OrgaId"+n))||void 0===i?void 0:i.textContent,d=yield t.databaseService.getSharedNoteData(c,t.currentGame,t.noteType);t.orgaName=d.name,t.orgaHome=d.hometown,t.orgaImg=d.imageURL,t.orgaInfo=d.noteInfo,t.orgaLink=d.noteLink,t.orgaId=d.id})()}addAllToDatabase(){var n=this;return(0,_.c)(function*(){const t=yield n.loadingController.create();yield t.present(),(yield n.databaseService.uploadAllSharedNotes(n.sharedOrganizations,n.currentGame,n.noteType))&&(yield n.databaseService.deleteAllSharedDocuments(n.currentGame,n.noteType)),t.dismiss()})()}dismissAllShared(){var n=this;return(0,_.c)(function*(){n.sharedOrgaCount>0&&(yield(yield n.alertController.create({header:"Are you sure?",message:"Data will be deleted",buttons:[{text:"Dismiss",handler:()=>{n.databaseService.deleteAllSharedDocuments(n.currentGame,n.noteType),n.cancelItemOrga()}},{text:"Cancel",role:"cancel",handler:()=>{}}]})).present())})()}shareAllOrganizations(){var n=this;return(0,_.c)(function*(){const t=yield n.loadingController.create();yield t.present();try{n.chosenUsers.forEach(function(){var i=(0,_.c)(function*(l){l&&(yield n.databaseService.shareAllNotes(l,n.orgas,n.currentGame,n.noteType))});return function(l){return i.apply(this,arguments)}}())}catch{yield(yield n.alertController.create({header:"Couldn't share",message:"There was a problem sharing your data.",buttons:["OK"]})).present()}t.dismiss()})()}shareOrganization(){var n=this;return(0,_.c)(function*(){const t=yield n.loadingController.create();try{yield t.present(),n.chosenUsers.forEach(function(){var i=(0,_.c)(function*(l){l&&console.log(l),yield yield n.databaseService.shareNote(l,n.orgaName,n.orgaHome,n.orgaImg,n.orgaLink,n.orgaInfo,n.currentGame,n.noteType,n.orgaId)});return function(l){return i.apply(this,arguments)}}())}catch{yield(yield n.alertController.create({header:"Upload failed",message:"There was a problem uploading your data.",buttons:["OK"]})).present()}t.dismiss()})()}addToDatabase(n){var t=this;return(0,_.c)(function*(){var i;yield t.setSharedIndex(n);const l=yield t.databaseService.uploadSharedNote(t.orgaName,t.orgaHome,t.orgaImg,t.orgaLink,t.orgaInfo,t.currentGame,t.noteType,t.orgaId);var c="OrgaId"+n;const d=yield null===(i=document.getElementById(c))||void 0===i?void 0:i.textContent;l&&(yield t.databaseService.deleteSharedDocument(d,t.currentGame,t.noteType))})()}cancelCreationOrga(){this.isCreationModalOpenOrga=!1,this.creationModalOrga.dismiss(null,"cancel")}cancelAlertOrga(){this.isAlertModalOpenOrganization=!1,this.alertModalOrga.dismiss(null,"cancel")}cancelSearchOrga(){this.isSearchModalOpenOrga=!1,this.searchModalOrga.dismiss(null,"cancel")}cancelItemOrga(){this.isItemModalOpenOrga=!1,this.itemModalOrga.dismiss(null,"cancel"),this.editMode&&this.toggleEditModeOrga()}openAlert(){this.isAlertModalOpenOrganization=!0}openCreation(){this.isCreationModalOpenOrga=!0}openSearch(){this.isSearchModalOpenOrga=!0}onWillDismiss(n){this.isSearchModalOpenOrga=!1,this.isCreationModalOpenOrga=!1,this.isItemModalOpenOrga=!1,this.isAlertModalOpenOrganization=!1}}return(o=r).\u0275fac=function(n){return new(n||o)(e.GI1(O.C),e.GI1(s.Kg),e.GI1(s.iW),e.GI1(g.im))},o.\u0275cmp=e.In1({type:o,selectors:[["app-tab2"]],viewQuery:function(n,t){if(1&n&&(e.CC$(T,5),e.CC$(y,5),e.CC$(I,5),e.CC$(G,5)),2&n){let i;e.wto(i=e.Gqi())&&(t.creationModalOrga=i.first),e.wto(i=e.Gqi())&&(t.searchModalOrga=i.first),e.wto(i=e.Gqi())&&(t.itemModalOrga=i.first),e.wto(i=e.Gqi())&&(t.alertModalOrga=i.first)}},decls:35,vars:11,consts:[[3,"translucent"],["slot","start"],["slot","end","color","danger",1,"badge-position"],["slot","end","id","open-shareAllorgas","name","share-social-outline",2,"height","35px","width","35px"],["slot","end","name","notifications-outline",2,"height","35px","width","35px",3,"click"],["trigger","open-shareAllorgas",3,"isOpen"],[3,"fullscreen"],["slot","fixed","vertical","bottom","horizontal","end"],["color","secondary",3,"click"],["name","add-outline"],["slot","fixed","vertical","bottom","horizontal","start",3,"hidden"],["name","search-outline"],["color","danger",3,"click"],["name","remove"],["size","12","size-md","6","size-lg","4",4,"ngFor","ngForOf"],[3,"isOpen","willDismiss"],["creationModalOrga",""],["searchModalOrga",""],["itemModalOrga",""],["alertModalOrga",""],["label","Choose a user","name","chosenUsers",3,"multiple","ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["color","dark","fill","outline",3,"click"],[3,"value"],["size","12","size-md","6","size-lg","4"],[3,"ngClass"],[1,"image-container",3,"click"],[3,"src","alt",4,"ngIf","ngIfElse"],["placeholder_avatar",""],["class","truncate-text",4,"ngIf"],["expand","block","color","primary",3,"click"],["slot","end","name","chevron-forward-outline"],[3,"src","alt"],[1,"placeholder"],["src","https://ionicframework.com/docs/img/demos/avatar.svg","alt","Placeholder"],[1,"truncate-text"],[1,"ion-padding"],[1,"flex-center"],[3,"formGroup"],[3,"click"],[4,"ngIf","ngIfElse"],["formControlName","name","label","Name","labelPlacement","floating","placeholder","Enter name","type","text"],["color","danger",4,"ngIf"],["formControlName","hometown","label","Hometown","labelPlacement","floating","placeholder","Enter hometown","type","text"],["color","dark","form","round",3,"disabled","click"],["color","danger","fill","outline",3,"click"],["color","danger"],["show-clear-button","focus","value",""],["searchBar",""],["position","floating","aria-label","Choose an origin"],["name","selectedHometown",3,"ngModel","ngModelChange"],["color","dark","form","round",3,"click"],["slot","fixed","vertical","bottom","horizontal","end",3,"hidden"],["name","create-outline"],["color","success",3,"click"],["name","save-outline"],["slot","fixed","vertical","top","horizontal","end",3,"hidden"],["id","open-popover-orga","color","secondary"],["name","share-social-outline"],["trigger","open-popover-orga",3,"isOpen"],[3,"id",4,"ngIf"],["placeholder","Type the organizations name","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["slot","start",4,"ngIf"],["slot","end","style","text-decoration: none; pointer-events: none;","href","",4,"ngIf"],["placeholder","Type organization hometown","type","text",3,"ngModel","ngModelChange",4,"ngIf"],[4,"ngIf"],["placeholder","Type organization link","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["style","resize: none; width: 100%; height: 100%;","rows","7","cols","55","readonly","",4,"ngIf"],["placeholder","Type organization info","rows","40","cols","55",3,"ngModel","ngModelChange",4,"ngIf"],["color","danger","form","round",3,"click"],["label","Choose a user","name","chosenUser",3,"multiple","ngModel","ngModelChange"],[3,"id"],["placeholder","Type the organizations name","type","text",3,"ngModel","ngModelChange"],["slot","end","href","",2,"text-decoration","none","pointer-events","none"],["placeholder","Type organization hometown","type","text",3,"ngModel","ngModelChange"],["slot","end","style","text-decoration: none;",3,"href",4,"ngIf"],["slot","end",2,"text-decoration","none",3,"href"],["placeholder","Type organization link","type","text",3,"ngModel","ngModelChange"],["rows","7","cols","55","readonly","",2,"resize","none","width","100%","height","100%"],["placeholder","Type organization info","rows","40","cols","55",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","center"],["color","success","form","round",3,"click"],["color","secondary","form","round",3,"click"],[3,"inset"],[4,"ngFor","ngForOf"],[3,"button","ngClass"],["aria-hidden","true","slot","start"],[3,"src",4,"ngIf","ngIfElse"],[2,"display","none",3,"id"],["slot","end","name","add-circle-outline",3,"click"],["slot","end","name","trash-outline",3,"click"],[3,"src"],["src","https://ionicframework.com/docs/img/demos/avatar.svg"]],template:function(n,t){1&n&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.OEk(3," Organization Notes "),e.C$Y(),e.I0R(4,"ion-badge",2),e.OEk(5),e.C$Y(),e.wR5(6,"ion-icon",3),e.I0R(7,"ion-icon",4),e.qCj("click",function(){return t.openAlert()}),e.C$Y(),e.I0R(8,"ion-popover",5),e.yuY(9,E,6,3,"ng-template"),e.C$Y()()(),e.I0R(10,"ion-content",6)(11,"ion-fab",7)(12,"ion-fab-button",8),e.qCj("click",function(){return t.openCreation()}),e.wR5(13,"ion-icon",9),e.C$Y()(),e.I0R(14,"ion-fab",10)(15,"ion-fab-button",8),e.qCj("click",function(){return t.openSearch()}),e.wR5(16,"ion-icon",11),e.C$Y()(),e.I0R(17,"ion-fab",10)(18,"ion-fab-button",12),e.qCj("click",function(){return t.search("")}),e.wR5(19,"ion-icon",13),e.C$Y()(),e.I0R(20,"ion-grid")(21,"ion-row"),e.yuY(22,M,18,6,"ion-col",14),e.C$Y()(),e.I0R(23,"ion-modal",15,16),e.qCj("willDismiss",function(l){return t.onWillDismiss(l)}),e.yuY(25,$,21,5,"ng-template"),e.C$Y(),e.I0R(26,"ion-modal",15,17),e.qCj("willDismiss",function(l){return t.onWillDismiss(l)}),e.yuY(28,z,26,2,"ng-template"),e.C$Y(),e.I0R(29,"ion-modal",15,18),e.qCj("willDismiss",function(l){return t.onWillDismiss(l)}),e.yuY(31,Z,43,16,"ng-template"),e.C$Y(),e.I0R(32,"ion-modal",15,19),e.qCj("willDismiss",function(l){return t.onWillDismiss(l)}),e.yuY(34,ne,11,2,"ng-template"),e.C$Y()()),2&n&&(e.E7m("translucent",!0),e.yG2(5),e.cNF(t.sharedOrgaCount),e.yG2(3),e.E7m("isOpen",t.isPopoverOpen),e.yG2(2),e.E7m("fullscreen",!0),e.yG2(4),e.E7m("hidden",!t.filter),e.yG2(3),e.E7m("hidden",t.filter),e.yG2(5),e.E7m("ngForOf",t.orgas),e.yG2(),e.E7m("isOpen",t.isCreationModalOpenOrga),e.yG2(3),e.E7m("isOpen",t.isSearchModalOpenOrga),e.yG2(3),e.E7m("isOpen",t.isItemModalOpenOrga),e.yG2(3),e.E7m("isOpen",t.isAlertModalOpenOrganization))},dependencies:[s.O7,s.Gi,s.sn,s.KC,s.Gg,s.YY,s.MN,s.I7,s.Kk,s._i,s.q8,s.Wq,s.YP,s.wB,s.Ko,s.A5,s.Yb,s.UB,s.QR,s.OC,s.qo,s.KQ,s.Cy,s.gd,s.tM,s.Md,s.yc,s.sW,s.IT,s.qG,p.QF,p.ay,p.u_,g.sz,g.ot,g.ue,g.u,g._G,g.SC,g.uW,g.Wo]}),r})()}];let oe=(()=>{var o;class r{}return(o=r).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.a4G({type:o}),o.\u0275inj=e.s3X({imports:[f.qQ.forChild(ae),f.qQ]}),r})(),ie=(()=>{var o;class r{}return(o=r).\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.a4G({type:o}),o.\u0275inj=e.s3X({imports:[s.wZ,p.MD,g.y,C.C,oe,g.sl]}),r})()}}]);