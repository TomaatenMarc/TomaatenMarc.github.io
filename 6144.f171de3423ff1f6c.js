"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6144],{6144:(ue,G,f)=>{f.r(G),f.d(G,{Tab2PageModule:()=>ge});var g=f(2112),T=f(1368),O=f(4716),R=f(4692),k=f(8244),u=f(1528),C=f(1740);class v{constructor(l){this.formBuilder=l}createForm(){return this.formBuilder.group({name:["",[O.AQ.required]],hometown:[""]})}}var e=f(4496),p=f(4552),I=f(5748),_=f(4688),y=f(1512),z=f(9552);let $=(()=>{var o;class l{constructor(t,n,i){this.auth=t,this.fireStore=n,this.storage=i}getOrganizations(t,n,i){let c,s=(0,_.oV)(this.fireStore,`organizations/from_${this.auth.currentUser.email}_in_${i}/OrganizationData`);return""!=t&&(c=(0,_.kt)(s,(0,_.A9)("name",">=",t),(0,_.A9)("name","<=",t+"\uf8ff"))),""!==n&&(c=(0,_.kt)(c||s,(0,_.A9)("hometown","==",n))),(0,p.GK)(""!=n||""!=t?c:s)}getEmails(t){return(0,p.GK)((0,_.oV)(this.fireStore,`emails_in_${t}`))}getShared(t){return(0,p.GK)((0,_.oV)(this.fireStore,`organizations/from_${this.auth.currentUser.email}_in_${t}/sharedOrganizationData`))}uploadImage(t,n,i){var r=this;return(0,u.c)(function*(){const s=r.auth.currentUser,d=(0,I.IL)(r.storage,`uploads/${n}'s_avatar.png`);try{yield(0,y.K)(d,t.base64String,"base64");const m=yield(0,y.Kq)(d),h=(0,_.oV)(r.fireStore,`organizations/from_${s.email}_in_${i}/OrganizationData`),b=(0,p.UN)(h,n);return yield(0,_.gD)(b,{imageURL:m}),!0}catch{return null}})()}uploadOrganization(t,n,i,r){var s=this;return(0,u.c)(function*(){const c=s.auth.currentUser,m=(0,I.IL)(s.storage,`uploads/${t}'s_avatar.png`);try{const h=(0,_.oV)(s.fireStore,`organizations/from_${c.email}_in_${r}/OrganizationData`),b="",E="";if(i){yield(0,y.K)(m,i.base64String,"base64");const _e=yield(0,y.Kq)(m);return yield(0,_.Sm)((0,p.UN)(h,t),{name:t,hometown:n,imageURL:_e,orgaInfo:b,orgaLink:E}),!0}return yield(0,_.Sm)((0,p.UN)(h,t),{name:t,hometown:n,imageURL:"",orgaInfo:b,orgaLink:E}),!0}catch(h){return console.log(h),null}})()}uploadSharedOrganization(t,n,i,r,s,c){var d=this;return(0,u.c)(function*(){const m=d.auth.currentUser;try{const h=(0,_.oV)(d.fireStore,`organizations/from_${m.email}_in_${c}/OrganizationData`);return yield(0,_.Sm)((0,p.UN)(h,t),{name:t,hometown:n,imageURL:i,orgaInfo:s,orgaLink:r}),!0}catch(h){return console.log(h),null}})()}shareOrganization(t,n,i,r,s,c,d){var m=this;return(0,u.c)(function*(){if(""==t)return null;try{const h=(0,_.oV)(m.fireStore,`organizations/from_${t}_in_${d}/sharedOrganizationData`);return yield(0,_.Sm)((0,p.UN)(h,n),{name:n,hometown:i,imageURL:r,orgaLink:s,orgaInfo:c}),!0}catch(h){return console.log(h),null}})()}getOrganizationData(t,n){var i=this;return(0,u.c)(function*(){const r=i.auth.currentUser,s=(0,_.gZ)(),c=(0,p.UN)(s,`organizations/from_${r.email}_in_${n}/OrganizationData`,t),d=yield(0,_.i4)(c);try{return d.exists()?d.data():(console.log("Kein Dokument mit dieser ID gefunden."),null)}catch(m){console.error("Fehler beim Abrufen des Dokuments:",m)}})()}getSharedOrganizationData(t,n){var i=this;return(0,u.c)(function*(){const r=i.auth.currentUser,s=(0,_.gZ)(),c=(0,p.UN)(s,`organizations/from_${r.email}_in_${n}/sharedOrganizationData`,t),d=yield(0,_.i4)(c);try{return d.exists()?d.data():(console.log("Kein Dokument mit dieser ID gefunden."),null)}catch(m){console.error("Fehler beim Abrufen des Dokuments:",m)}})()}updateOrganization(t,n,i,r,s){var c=this;return(0,u.c)(function*(){const d=c.auth.currentUser;try{const m=(0,_.oV)(c.fireStore,`organizations/from_${d.email}_in_${s}/OrganizationData`),h=(0,p.UN)(m,r);return yield(0,_.gD)(h,{hometown:t,orgaLink:n,orgaInfo:i}),!0}catch(m){return console.log(m),null}})()}deleteDocument(t,n){var i=this;return(0,u.c)(function*(){const r=i.auth.currentUser;try{const s=(0,_.gZ)(),c=(0,p.UN)(s,`organizations/from_${r.email}_in_${n}/OrganizationData`,t);return yield(0,_.oh)(c),console.log("Document successfully deleted!"),!0}catch(s){return console.error("Error deleting document: ",s),!1}})()}deleteSharedDocument(t,n){var i=this;return(0,u.c)(function*(){const r=i.auth.currentUser;try{const s=(0,_.gZ)(),c=(0,p.UN)(s,`organizations/from_${r.email}_in_${n}/sharedOrganizationData`,t);return yield(0,_.oh)(c),console.log("Document successfully deleted!"),!0}catch(s){return console.error("Error deleting document: ",s),!1}})()}}return(o=l).\u0275fac=function(t){return new(t||o)(e.CoB(z.sL),e.CoB(p.OI),e.CoB(I.u_))},o.\u0275prov=e.wxM({token:o,factory:o.\u0275fac,providedIn:"root"}),l})();const x=["creationModalOrga"],M=["searchModalOrga"],Y=["itemModalOrga"],P=["alertModalOrga"];function w(o,l){if(1&o&&e.wR5(0,"img",25),2&o){const a=e.GaO().$implicit;e.E7m("src",a.imageURL,e.K6U)}}function S(o,l){1&o&&(e.I0R(0,"div",26),e.wR5(1,"img",27),e.C$Y())}function D(o,l){if(1&o&&(e.I0R(0,"ion-item")(1,"ion-label",28),e.OEk(2),e.C$Y()()),2&o){const a=e.GaO().$implicit;e.yG2(2),e.cNF(a.orgaInfo)}}function U(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-item-sliding")(1,"ion-item",19)(2,"ion-avatar",20),e.qCj("click",function(){const i=e.usT(a).$implicit,r=e.GaO();return e.CGJ(r.changeImage(i))}),e.yuY(3,w,1,1,"img",21)(4,S,2,0,"ng-template",null,22,e.gJz),e.C$Y(),e.I0R(6,"ion-label"),e.OEk(7),e.C$Y(),e.I0R(8,"ion-label"),e.OEk(9),e.C$Y(),e.I0R(10,"ion-icon",23),e.qCj("click",function(){const i=e.usT(a).$implicit,r=e.GaO();return e.CGJ(r.setIndexOrga(i))}),e.C$Y()(),e.yuY(11,D,3,1,"ion-item",24),e.C$Y()}if(2&o){const a=l.$implicit,t=e.Gew(5);e.yG2(),e.E7m("button",!0),e.yG2(2),e.E7m("ngIf",a.imageURL)("ngIfElse",t),e.yG2(4),e.cNF(a.name),e.yG2(2),e.cNF(a.hometown),e.yG2(2),e.E7m("ngIf",""!=a.orgaInfo)}}function N(o,l){1&o&&(e.I0R(0,"p"),e.OEk(1,"Picture has been selected"),e.C$Y())}function F(o,l){1&o&&(e.I0R(0,"div",26)(1,"p"),e.OEk(2,"Choose a picture"),e.C$Y()())}function K(o,l){1&o&&(e.I0R(0,"ion-label",39),e.OEk(1,"Name is mandatory"),e.C$Y())}function A(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",29)(1,"div",30)(2,"form",31)(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e.OEk(6,"Create Organization Note"),e.C$Y()(),e.I0R(7,"ion-card-content")(8,"ion-item",32),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.chooseImage())}),e.yuY(9,N,2,0,"p",33)(10,F,3,0,"ng-template",null,22,e.gJz),e.C$Y(),e.I0R(12,"ion-item"),e.wR5(13,"ion-input",34),e.C$Y(),e.yuY(14,K,2,0,"ion-label",35),e.I0R(15,"ion-item"),e.wR5(16,"ion-input",36),e.C$Y(),e.I0R(17,"ion-button",37),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.createOrganization())}),e.OEk(18,"Create Organization"),e.C$Y(),e.I0R(19,"ion-button",38),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.cancelCreationOrga())}),e.OEk(20,"Cancel"),e.C$Y()()()()()()}if(2&o){const a=e.Gew(11),t=e.GaO();let n;e.yG2(2),e.E7m("formGroup",t.createOrgaForm),e.yG2(7),e.E7m("ngIf",t.photo)("ngIfElse",a),e.yG2(5),e.E7m("ngIf",(null==(n=t.createOrgaForm.get("name"))?null:n.touched)&&(null==(n=t.createOrgaForm.get("name"))||null==n.errors?null:n.errors.required)),e.yG2(3),e.E7m("disabled",!t.createOrgaForm.valid)}}function L(o,l){if(1&o&&(e.I0R(0,"ion-select-option",46),e.OEk(1),e.C$Y()),2&o){const a=l.$implicit;e.E7m("value",a),e.yG2(),e.cNF(a)}}function q(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",29)(1,"div",30)(2,"form")(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),e.OEk(6,"Search for Organization"),e.C$Y()(),e.I0R(7,"ion-card-content")(8,"ion-item"),e.wR5(9,"ion-searchbar",40,41),e.C$Y(),e.I0R(11,"ion-item")(12,"ion-label",42),e.OEk(13,"Choose origin"),e.C$Y(),e.I0R(14,"ion-select",43),e.iHE("ngModelChange",function(n){e.usT(a);const i=e.GaO();return e.kNx(i.selectedHometown,n)||(i.selectedHometown=n),e.CGJ(n)}),e.yuY(15,L,2,2,"ion-select-option",44),e.C$Y()(),e.I0R(16,"ion-button",45),e.qCj("click",function(){e.usT(a);const n=e.Gew(10),i=e.GaO();return e.CGJ(i.search(n.value))}),e.OEk(17,"Search"),e.C$Y(),e.I0R(18,"ion-button",38),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.cancelSearchOrga())}),e.OEk(19,"Cancel"),e.C$Y()()()()()()}if(2&o){const a=e.GaO();e.yG2(14),e.OKB("ngModel",a.selectedHometown),e.yG2(),e.E7m("ngForOf",a.hometowns)}}function j(o,l){if(1&o&&(e.I0R(0,"ion-select-option",46),e.OEk(1),e.C$Y()),2&o){const a=l.$implicit;e.E7m("value",a.email),e.yG2(),e.cNF(a.email)}}function H(o,l){if(1&o){const a=e.KQA();e.I0R(0,"h3"),e.OEk(1,"Share Orga with user"),e.C$Y(),e.I0R(2,"ion-select",65),e.iHE("ngModelChange",function(n){e.usT(a);const i=e.GaO(2);return e.kNx(i.chosenUsers,n)||(i.chosenUsers=n),e.CGJ(n)}),e.yuY(3,j,2,2,"ion-select-option",44),e.C$Y(),e.I0R(4,"ion-button",66),e.qCj("click",function(){e.usT(a);const n=e.GaO(2);return e.CGJ(n.shareOrganization())}),e.OEk(5,"Share"),e.C$Y()}if(2&o){const a=e.GaO(2);e.yG2(2),e.E7m("multiple",!0),e.OKB("ngModel",a.chosenUsers),e.yG2(),e.E7m("ngForOf",a.users)}}function J(o,l){if(1&o&&e.wR5(0,"img",25),2&o){const a=e.GaO(2);e.E7m("src",a.orgaImg,e.K6U)}}function B(o,l){1&o&&(e.I0R(0,"div",26),e.wR5(1,"img",27),e.C$Y())}function Q(o,l){1&o&&(e.I0R(0,"ion-label",1),e.OEk(1,"Hometown: "),e.C$Y())}function W(o,l){if(1&o&&(e.I0R(0,"a",67),e.OEk(1),e.C$Y()),2&o){const a=e.GaO(2);e.yG2(),e.cNF(a.orgaHome)}}function V(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-input",68),e.iHE("ngModelChange",function(n){e.usT(a);const i=e.GaO(2);return e.kNx(i.orgaHome,n)||(i.orgaHome=n),e.CGJ(n)}),e.C$Y()}if(2&o){const a=e.GaO(2);e.OKB("ngModel",a.orgaHome)}}function Z(o,l){1&o&&(e.I0R(0,"ion-label",1),e.OEk(1,"Link:"),e.C$Y())}function X(o,l){if(1&o&&(e.I0R(0,"a",69),e.OEk(1),e.C$Y()),2&o){const a=e.GaO(2);e._6D("href",a.orgaLink,e.K6U),e.yG2(),e.cNF(a.orgaName)}}function ee(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-input",70),e.iHE("ngModelChange",function(n){e.usT(a);const i=e.GaO(2);return e.kNx(i.orgaLink,n)||(i.orgaLink=n),e.CGJ(n)}),e.C$Y()}if(2&o){const a=e.GaO(2);e.OKB("ngModel",a.orgaLink)}}function te(o,l){if(1&o&&(e.I0R(0,"textarea",71),e.OEk(1),e.C$Y()),2&o){const a=e.GaO(2);e.yG2(),e.cNF(a.orgaInfo)}}function ne(o,l){if(1&o){const a=e.KQA();e.I0R(0,"textarea",72),e.iHE("ngModelChange",function(n){e.usT(a);const i=e.GaO(2);return e.kNx(i.orgaInfo,n)||(i.orgaInfo=n),e.CGJ(n)}),e.OEk(1),e.C$Y()}if(2&o){const a=e.GaO(2);e.OKB("ngModel",a.orgaInfo),e.yG2(),e.cNF(a.orgaInfo)}}function oe(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",29)(1,"ion-fab",47)(2,"ion-fab-button",6),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.toggleEditModeOrga())}),e.wR5(3,"ion-icon",48),e.C$Y()(),e.I0R(4,"ion-fab",47)(5,"ion-fab-button",49),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.saveOrgaData())}),e.wR5(6,"ion-icon",50),e.C$Y()(),e.I0R(7,"ion-fab",51)(8,"ion-fab-button",52),e.wR5(9,"ion-icon",53),e.C$Y()(),e.I0R(10,"ion-popover",54),e.yuY(11,H,6,3,"ng-template"),e.C$Y(),e.I0R(12,"ion-card")(13,"ion-card-header")(14,"ion-card-title",55),e.OEk(15),e.C$Y()(),e.I0R(16,"ion-card-content")(17,"ion-item")(18,"ion-avatar",56),e.yuY(19,J,1,1,"img",21)(20,B,2,0,"ng-template",null,22,e.gJz),e.C$Y()()(),e.I0R(22,"ion-card-content")(23,"ion-item"),e.yuY(24,Q,2,0,"ion-label",57)(25,W,2,1,"a",58)(26,V,1,1,"ion-input",59),e.C$Y(),e.I0R(27,"ion-item"),e.yuY(28,Z,2,0,"ion-label",57)(29,X,2,2,"a",60)(30,ee,1,1,"ion-input",61),e.C$Y()()(),e.I0R(31,"ion-card")(32,"ion-card-header")(33,"ion-card-title"),e.OEk(34,"Additional Infos"),e.C$Y()(),e.I0R(35,"ion-card-content")(36,"ion-item"),e.yuY(37,te,2,1,"textarea",62)(38,ne,2,2,"textarea",63),e.C$Y()()(),e.I0R(39,"ion-button",38),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.cancelItemOrga())}),e.OEk(40,"Close"),e.C$Y(),e.I0R(41,"ion-button",64),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.delete())}),e.OEk(42,"Delete"),e.C$Y()()}if(2&o){const a=e.Gew(21),t=e.GaO();e.yG2(),e.E7m("hidden",t.editMode),e.yG2(3),e.E7m("hidden",!t.editMode),e.yG2(3),e.E7m("hidden",t.editMode),e.yG2(3),e.E7m("isOpen",t.isPopoverOpen),e.yG2(4),e.CI5("id","nameOrga",t.currentItemIndexOrga,""),e.yG2(),e.cNF(t.orgaName),e.yG2(4),e.E7m("ngIf",t.orgaImg)("ngIfElse",a),e.yG2(5),e.E7m("ngIf",!t.editMode),e.yG2(),e.E7m("ngIf",!t.editMode),e.yG2(),e.E7m("ngIf",t.editMode),e.yG2(2),e.E7m("ngIf",!t.editMode),e.yG2(),e.E7m("ngIf",!t.editMode),e.yG2(),e.E7m("ngIf",t.editMode),e.yG2(7),e.E7m("ngIf",!t.editMode),e.yG2(),e.E7m("ngIf",t.editMode)}}function ae(o,l){if(1&o&&e.wR5(0,"img",25),2&o){const a=e.GaO().$implicit;e.E7m("src",a.imageURL,e.K6U)}}function ie(o,l){1&o&&(e.I0R(0,"div",26),e.wR5(1,"img",27),e.C$Y())}function re(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-item-sliding")(1,"ion-item",19)(2,"ion-avatar",74),e.yuY(3,ae,1,1,"img",21)(4,ie,2,0,"ng-template",null,22,e.gJz),e.C$Y(),e.I0R(6,"ion-label",55),e.OEk(7),e.C$Y(),e.I0R(8,"ion-label"),e.OEk(9),e.C$Y(),e.I0R(10,"ion-icon",75),e.qCj("click",function(){const i=e.usT(a).index,r=e.GaO(2);return e.CGJ(r.addToDatabase(i))}),e.C$Y(),e.I0R(11,"ion-icon",76),e.qCj("click",function(){const i=e.usT(a).index,r=e.GaO(2);return e.CGJ(r.deleteShared(i))}),e.C$Y()()()}if(2&o){const a=l.$implicit,t=l.index,n=e.Gew(5);e.yG2(),e.E7m("button",!0),e.yG2(2),e.E7m("ngIf",a.imageURL)("ngIfElse",n),e.yG2(3),e.CI5("id","sharedNameOrganization",t,""),e.yG2(),e.cNF(a.name),e.yG2(2),e.cNF(a.hometown)}}function le(o,l){if(1&o){const a=e.KQA();e.I0R(0,"ion-content",29)(1,"h3",73),e.OEk(2,"Shared Characters"),e.C$Y(),e.I0R(3,"ion-list",12),e.yuY(4,re,12,6,"ion-item-sliding",13),e.C$Y(),e.I0R(5,"ion-button",64),e.qCj("click",function(){e.usT(a);const n=e.GaO();return e.CGJ(n.cancelAlertOrga())}),e.OEk(6,"Close"),e.C$Y()()}if(2&o){const a=e.GaO();e.yG2(3),e.E7m("inset",!0),e.yG2(),e.E7m("ngForOf",a.sharedOrganizations)}}const se=[{path:"",component:(()=>{var o;class l{constructor(t,n,i,r){this.organizationService=t,this.loadingController=n,this.alertController=i,this.formBuilder=r,this.searchItem="",this.selectedHometown="",this.chosenUsers=null,this.profile=null,this.orgas=null,this.sharedOrganizations=null,this.users=null,this.filter=!0,this.editMode=!1,this.isPopoverOpen=!1,this.tempOrganizationLink="",this.tempOrganizationInfo="",this.currentGame=localStorage.getItem("currentGame"),this.organizationService.getOrganizations(this.searchItem,this.selectedHometown,this.currentGame).subscribe(s=>{this.orgas=s,this.hometowns=this.uniqueHometowns}),this.organizationService.getEmails(this.currentGame).subscribe(s=>{this.users=s}),this.organizationService.getShared(this.currentGame).subscribe(s=>{this.sharedOrganizations=s,this.sharedOrgaCount=s.length})}ngOnInit(){this.createOrgaForm=new v(this.formBuilder).createForm(),this.onWillDismiss(null)}toggleEditModeOrga(){this.editMode=!this.editMode}get uniqueHometowns(){if(!this.orgas)return[];const t=new Set;return this.orgas.forEach(n=>t.add(n.hometown)),Array.from(t)}search(t){console.log(this.selectedHometown),this.organizationService.getOrganizations(t,this.selectedHometown,this.currentGame).subscribe(n=>{this.orgas=n}),this.selectedHometown="",this.cancelSearchOrga(),setTimeout(()=>{this.filter=!this.filter},300)}changeImage(t){var n=this;return(0,u.c)(function*(){const i=yield C.Ut.getPhoto({quality:90,allowEditing:!1,resultType:C.on.Base64,source:C._8.Photos});if(i){const r=yield n.loadingController.create();yield r.present();const s=yield n.organizationService.uploadImage(i,t.name,n.currentGame);r.dismiss(),s||(yield(yield n.alertController.create({header:"Upload failed",message:"There was a problem uploading your avatar.",buttons:["OK"]})).present())}})()}chooseImage(){var t=this;return(0,u.c)(function*(){t.photo=yield C.Ut.getPhoto({quality:90,allowEditing:!1,resultType:C.on.Base64,source:C._8.Photos})})()}saveOrgaData(){var t=this;return(0,u.c)(function*(){const n=yield t.loadingController.create();yield n.present();const i=yield t.organizationService.updateOrganization(t.orgaHome,t.orgaLink,t.orgaInfo,t.orgaName,t.currentGame);n.dismiss(),i||(yield(yield t.alertController.create({header:"Upload failed",message:"There was a problem uploading your data.",buttons:["OK"]})).present()),t.toggleEditModeOrga()})()}createOrganization(){var t=this;return(0,u.c)(function*(){const n=yield t.loadingController.create();yield n.present();const i=yield t.organizationService.uploadOrganization(t.createOrgaForm.value.name,t.createOrgaForm.value.hometown,null==t?void 0:t.photo,t.currentGame);t.photo=null,t.createOrgaForm.reset(),n.dismiss(),i||(yield(yield t.alertController.create({header:"Upload failed",message:"There was a problem uploading your organization.",buttons:["OK"]})).present()),t.cancelCreationOrga()})()}delete(){var t=this;return(0,u.c)(function*(){yield(yield t.alertController.create({header:"Are you sure?",message:"Data will be deleted",buttons:[{text:"Delete",handler:()=>{t.organizationService.deleteDocument(t.orga.name,t.currentGame),t.cancelItemOrga()}},{text:"Cancel",role:"cancel",handler:()=>{}}]})).present()})()}deleteShared(t){var n=this;return(0,u.c)(function*(){yield(yield n.alertController.create({header:"Are you sure?",message:"Data will be deleted",buttons:[{text:"Delete",handler:()=>{var r;const c=null===(r=document.getElementById("sharedNameOrganization"+t))||void 0===r?void 0:r.textContent;n.organizationService.deleteSharedDocument(c,n.currentGame),n.cancelItemOrga()}},{text:"Cancel",role:"cancel",handler:()=>{}}]})).present()})()}setIndexOrga(t){var n=this;return(0,u.c)(function*(){n.orgaName=t.name,n.orgaHome=t.hometown,n.orgaImg=t.imageURL,n.orgaInfo=t.orgaInfo,n.orgaLink=t.orgaLink,n.orga=t,n.isItemModalOpenOrga=!0})()}setSharedIndex(t){var n=this;return(0,u.c)(function*(){var i;const s=null===(i=document.getElementById("sharedNameOrganization"+t))||void 0===i?void 0:i.textContent,c=yield n.organizationService.getSharedOrganizationData(s,n.currentGame);console.log("Link: "+c.organizationLink),n.orgaName=c.name,n.orgaHome=c.hometown,n.orgaImg=c.imageURL,n.orgaInfo=c.orgaInfo,n.orgaLink=c.orgaLink})()}shareOrganization(){var t=this;return(0,u.c)(function*(){const n=yield t.loadingController.create();try{yield n.present(),t.chosenUsers.forEach(function(){var i=(0,u.c)(function*(r){r&&console.log(r),yield yield t.organizationService.shareOrganization(r,t.orgaName,t.orgaHome,t.orgaImg,t.orgaLink,t.orgaInfo,t.currentGame)});return function(r){return i.apply(this,arguments)}}())}catch{yield(yield t.alertController.create({header:"Upload failed",message:"There was a problem uploading your data.",buttons:["OK"]})).present()}n.dismiss()})()}addToDatabase(t){var n=this;return(0,u.c)(function*(){var i;yield n.setSharedIndex(t);const r=yield n.organizationService.uploadSharedOrganization(n.orgaName,n.orgaHome,n.orgaImg,n.orgaLink,n.orgaInfo,n.currentGame);var s="sharedNameOrganization"+t;const c=yield null===(i=document.getElementById(s))||void 0===i?void 0:i.textContent;r&&(yield n.organizationService.deleteSharedDocument(c,n.currentGame))})()}cancelCreationOrga(){this.isCreationModalOpenOrga=!1,this.creationModalOrga.dismiss(null,"cancel")}cancelAlertOrga(){this.isAlertModalOpenOrganization=!1,this.alertModalOrga.dismiss(null,"cancel")}cancelSearchOrga(){this.isSearchModalOpenOrga=!1,this.searchModalOrga.dismiss(null,"cancel")}cancelItemOrga(){this.isItemModalOpenOrga=!1,this.itemModalOrga.dismiss(null,"cancel"),this.editMode&&this.toggleEditModeOrga()}openAlert(){this.isAlertModalOpenOrganization=!0}openCreation(){this.isCreationModalOpenOrga=!0}openSearch(){this.isSearchModalOpenOrga=!0}onWillDismiss(t){this.isSearchModalOpenOrga=!1,this.isCreationModalOpenOrga=!1,this.isItemModalOpenOrga=!1,this.isAlertModalOpenOrganization=!1}}return(o=l).\u0275fac=function(t){return new(t||o)(e.GI1($),e.GI1(g.Kg),e.GI1(g.iW),e.GI1(O.im))},o.\u0275cmp=e.In1({type:o,selectors:[["app-tab2"]],viewQuery:function(t,n){if(1&t&&(e.CC$(x,5),e.CC$(M,5),e.CC$(Y,5),e.CC$(P,5)),2&t){let i;e.wto(i=e.Gqi())&&(n.creationModalOrga=i.first),e.wto(i=e.Gqi())&&(n.searchModalOrga=i.first),e.wto(i=e.Gqi())&&(n.itemModalOrga=i.first),e.wto(i=e.Gqi())&&(n.alertModalOrga=i.first)}},decls:31,vars:11,consts:[[3,"translucent"],["slot","start"],["slot","end","color","danger",1,"badge-position"],["slot","end","name","notifications-outline",2,"height","35px","width","35px",3,"click"],[3,"fullscreen"],["slot","fixed","vertical","bottom","horizontal","end"],["color","secondary",3,"click"],["name","add-outline"],["slot","fixed","vertical","bottom","horizontal","start",3,"hidden"],["name","search-outline"],["color","danger",3,"click"],["name","remove"],[3,"inset"],[4,"ngFor","ngForOf"],[3,"isOpen","willDismiss"],["creationModalOrga",""],["searchModalOrga",""],["itemModalOrga",""],["alertModalOrga",""],[3,"button"],["aria-hidden","true","slot","start",3,"click"],[3,"src",4,"ngIf","ngIfElse"],["placeholder_avatar",""],["name","chevron-forward-outline",3,"click"],[4,"ngIf"],[3,"src"],[1,"placeholder"],["src","https://ionicframework.com/docs/img/demos/avatar.svg"],[1,"crop"],[1,"ion-padding"],[1,"flex-center"],[3,"formGroup"],[3,"click"],[4,"ngIf","ngIfElse"],["formControlName","name","label","Name","labelPlacement","floating","placeholder","Enter name","type","text"],["color","danger",4,"ngIf"],["formControlName","hometown","label","Hometown","labelPlacement","floating","placeholder","Enter hometown","type","text"],["color","dark","form","round",3,"disabled","click"],["color","danger","fill","outline",3,"click"],["color","danger"],["show-clear-button","focus","value",""],["searchBar",""],["position","floating","aria-label","Choose hometown"],["name","selectedHometown",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["color","dark","form","round",3,"click"],[3,"value"],["slot","fixed","vertical","bottom","horizontal","end",3,"hidden"],["name","create-outline"],["color","success",3,"click"],["name","save-outline"],["slot","fixed","vertical","top","horizontal","end",3,"hidden"],["id","open-popover-orga","color","secondary"],["name","share-social-outline"],["trigger","open-popover-orga",3,"isOpen"],[3,"id"],["aria-hidden","true",1,"align-center"],["slot","start",4,"ngIf"],["slot","end","style","text-decoration: none; pointer-events: none;","href","",4,"ngIf"],["placeholder","Type character hometown","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["slot","end","style","text-decoration: none;",3,"href",4,"ngIf"],["placeholder","Type character link","type","text",3,"ngModel","ngModelChange",4,"ngIf"],["style","resize: none; width: 100%; height: 100%;","rows","7","cols","55","readonly","",4,"ngIf"],["placeholder","Type organization info","rows","40","cols","55",3,"ngModel","ngModelChange",4,"ngIf"],["color","danger","form","round",3,"click"],["label","Choose user","name","chosenUser",3,"multiple","ngModel","ngModelChange"],["color","dark","fill","outline",3,"click"],["slot","end","href","",2,"text-decoration","none","pointer-events","none"],["placeholder","Type character hometown","type","text",3,"ngModel","ngModelChange"],["slot","end",2,"text-decoration","none",3,"href"],["placeholder","Type character link","type","text",3,"ngModel","ngModelChange"],["rows","7","cols","55","readonly","",2,"resize","none","width","100%","height","100%"],["placeholder","Type organization info","rows","40","cols","55",3,"ngModel","ngModelChange"],[2,"display","flex","justify-content","center"],["aria-hidden","true","slot","start"],["slot","end","name","add-circle-outline",3,"click"],["slot","end","name","trash-outline",3,"click"]],template:function(t,n){1&t&&(e.I0R(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title",1),e.OEk(3," Organization Notes "),e.C$Y(),e.I0R(4,"ion-badge",2),e.OEk(5),e.C$Y(),e.I0R(6,"ion-icon",3),e.qCj("click",function(){return n.openAlert()}),e.C$Y()()(),e.I0R(7,"ion-content",4)(8,"ion-fab",5)(9,"ion-fab-button",6),e.qCj("click",function(){return n.openCreation()}),e.wR5(10,"ion-icon",7),e.C$Y()(),e.I0R(11,"ion-fab",8)(12,"ion-fab-button",6),e.qCj("click",function(){return n.openSearch()}),e.wR5(13,"ion-icon",9),e.C$Y()(),e.I0R(14,"ion-fab",8)(15,"ion-fab-button",10),e.qCj("click",function(){return n.search("")}),e.wR5(16,"ion-icon",11),e.C$Y()(),e.I0R(17,"ion-list",12),e.yuY(18,U,12,6,"ion-item-sliding",13),e.C$Y(),e.I0R(19,"ion-modal",14,15),e.qCj("willDismiss",function(r){return n.onWillDismiss(r)}),e.yuY(21,A,21,5,"ng-template"),e.C$Y(),e.I0R(22,"ion-modal",14,16),e.qCj("willDismiss",function(r){return n.onWillDismiss(r)}),e.yuY(24,q,20,2,"ng-template"),e.C$Y(),e.I0R(25,"ion-modal",14,17),e.qCj("willDismiss",function(r){return n.onWillDismiss(r)}),e.yuY(27,oe,43,16,"ng-template"),e.C$Y(),e.I0R(28,"ion-modal",14,18),e.qCj("willDismiss",function(r){return n.onWillDismiss(r)}),e.yuY(30,le,7,2,"ng-template"),e.C$Y()()),2&t&&(e.E7m("translucent",!0),e.yG2(5),e.cNF(n.sharedOrgaCount),e.yG2(2),e.E7m("fullscreen",!0),e.yG2(4),e.E7m("hidden",!n.filter),e.yG2(3),e.E7m("hidden",n.filter),e.yG2(3),e.E7m("inset",!0),e.yG2(),e.E7m("ngForOf",n.orgas),e.yG2(),e.E7m("isOpen",n.isCreationModalOpenOrga),e.yG2(3),e.E7m("isOpen",n.isSearchModalOpenOrga),e.yG2(3),e.E7m("isOpen",n.isItemModalOpenOrga),e.yG2(3),e.E7m("isOpen",n.isAlertModalOpenOrganization))},dependencies:[g.O7,g.Gi,g.sn,g.KC,g.Gg,g.YY,g.I7,g._i,g.q8,g.Wq,g.wB,g.Ko,g.A5,g.Yb,g.UB,g.QR,g.OC,g.KQ,g.Cy,g.gd,g.tM,g.Md,g.yc,g.sW,g.IT,g.qG,T.ay,T.u_,O.sz,O.ot,O.ue,O.u,O._G,O.SC,O.uW,O.Wo]}),l})()}];let ce=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.a4G({type:o}),o.\u0275inj=e.s3X({imports:[k.qQ.forChild(se),k.qQ]}),l})(),ge=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.a4G({type:o}),o.\u0275inj=e.s3X({imports:[g.wZ,T.MD,O.y,R.C,ce,O.sl]}),l})()}}]);